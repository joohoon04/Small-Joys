<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>행복 공유 - Small Joys</title>
    <link rel="stylesheet" href="/register.css"> 
    <link rel="stylesheet" href="/shared.css"> </head>
<body>

    <header class="header">
        <div class="logo">Small Joys</div>
        <nav class="nav">
            <a href="/shared" style="font-weight: bold; color: #5a9dc5;">공유페이지</a>|
            <a href="/home">나의 다이어리</a>|
            <a href="happy-find">행복찾기</a>|
            <a href="/mypage">마이페이지</a>|
            <a href="/login">로그아웃</a>
        </nav>
    </header>

    <div class="container">
        <div class="community-header">
            <h2>모두의 행복 일기</h2>
            <div class="search-container">
                <form action="/shared" method="GET"> <input type="text" name="search" placeholder="제목이나 내용으로 검색..." value="<%= searchTerm %>">
                    <button type="submit">검색</button>
                </form>
            </div>
        </div>

        <main class="post-list">

            <% if (posts.length > 0) { %>
                <% posts.forEach(post => { %>
                
                    <a href="/post/detail/<%= post._id %>" class="post-card-link">
                        <article class="post-card">
                            
                            <% if (post.imageUrl) { %>
                                <div class="post-card-image">
                                    <img src="<%= post.imageUrl %>" alt="<%= post.title %> 이미지">
                                D</div>
                            <% } %>

                            <h3 class="post-card-title"><%= post.title %></h3>
                            
                            <p class="post-card-snippet">
                                <%= post.content.substring(0, 100) %><% if (post.content.length > 100) { %>...<% } %>
                            </p>
                            
                            <div class="post-card-meta">
                                <span class="meta-author">👤 <%= post.authorId %></span>
                                <span class="meta-date">📅 <%= post.createdAt.toLocaleDateString('ko-KR') %></span>
                                <span class="meta-comments">💬 <%= post.commentCount %></span>
                            </div>
                        </article>
                    </a>
                    <% }) %>
            <% } else { %>
                <div class="no-posts-found">
                    <% if (searchTerm) { %>
                        <p>"<%= searchTerm %>"에 대한 검색 결과가 없습니다.</p>
                    <% } else { %>
                        <p>아직 공유된 일기가 없습니다. 첫 번째 행복을 공유해 주세요!</p>
                    <% } %>
                </div>
            <% } %>

        </main>
    </div>

 <footer class="footer">
    KAYWON UNIVERSITY DIGITAL MEDIA DESIGN JOOJAEHOON
    copyrtghtⓒJOOJAEHOON All RIGHT RESERVED | &copy; 2025
</footer>

</body>
</html>